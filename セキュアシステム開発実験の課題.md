# セキュアシステム開発実験の課題

## 案

- XSS 死体蹴りツール

  - 適当にクローリングして色々ペイロード投げる
  - selenium 使う
  - ペイロードいっぱい投げたいから自分で鯖立てた方がいいかも
  - ペイロードはどこかにデータベースないかな
    - [XSS データセット 1](https://www.kaggle.com/syedsaqlainhussain/cross-site-scripting-xss-dataset-for-deep-learning)
    - [XSS データセット 2](https://figshare.com/articles/dataset/XSS_dataset1_csv/13046138)
  - 学習済み XSS 判定システムを使って XSS が入るかチェックするとか

- SQLi チェックツール

  - SQLi を学習してチェックする
  - [SQLi データセット](https://www.kaggle.com/syedsaqlainhussain/sql-injection-dataset)
  - ここから重心みたいなのを探して死体蹴りツールにするのもいいかも

- cubing 暗号について何かやる

  - 実験して，論文書く
  - 貢献を説明するのが難しい

- GitHub CI でバージョンの最新チェック
  - GitHub Actions で実行
  - npm や pip の最新バージョンを確認して，env とチェック
  - 対応する CVE があれば，その脅威度や説明も出力

## 作りたいもの

### タイトル

フィッシングサイト警告 chrome 拡張

### 概要

フィッシングサイトを閲覧した際に，安全ではない可能性がある旨をユーザに伝える

### 必要になるコンポーネント

- フィッシングサイト検知 API
  - 入力
    - URL
  - 出力
    - フィッシングサイトかどうか
  - 技術
    - できれば Rust で書きたい
    - 無理そうならいつも使う FastAPI
  - 想定作業時間
    - 1h
- フィッシングサイトの判定モデル
  - 入力
    - [URL のデータセット](https://www.kaggle.com/taruntiwarihp/phishing-site-urls)← とりあえずこっち
    - [URL の属性情報が入ったデータセット](https://www.kaggle.com/akashkr/phishing-website-dataset)
  - 出力
    - フィッシングサイトかどうか
  - 技術
    - Python で書く
    - KNN でもそこそこいけるらしい(知らんが)
    - 良さげなデータセット二つあるので，両方使っても(データの合成 or 判定時に両方考慮するとか)いいし，学習がよくできた方使ってもいいと思う
  - 想定作業時間
    - 2h~(余った時間があれば基本的にここに時間をさく)
- chrome 拡張
  - フィッシングサイトへ飛んだ時に，URL とかサイトの情報とかを取得して API へ送信する
  - API の結果に応じて画面全体を変更する
  - HTML を取得して，全部コメントアウトして，ユーザーがフィッシングサイトではないと言ったらコメントアウトを消す
  - [適当にやればできそう](https://qiita.com/a01sa01to/items/bd7b18b4ec3dc6c46b32)
  - 想定作業時間
    - 1hでできるはず
    - よく詰まるのでもしかしたら時間かかるかも
- フィッシングサイト(時間があれば, 優先度低)
  - 技術
    - 何でもいい

### 難しそうなところ

- chrome 拡張の発動時間
  - 先にリダイレクトされないか怖い

## 作りたいもの(旧)

### タイトル

URL クエリパラメータによる XSS 自動検知システム

### 概要

XSS の可能性があるクエリパラメータを用いて HTML ページを生成した際，その HTML ファイルに XSS の脆弱性が混在しているか判定する WebAPI

### 必要になるコンポーネント

- XSS 検知 API
  - 入力
    - HTML ページ
  - 出力
    - XSS 脆弱性の混入有無
    - (その該当箇所)
  - 技術
    - できれば Rust で書きたい
- XSS の判定モデル
  - 入力
    - [XSS データセット](https://figshare.com/articles/dataset/XSS_dataset1_csv/13046138)
    - HTML のコンポーネント(?)(`/<.*>.*<.*>/`)
  - 出力
    - XSS の混入有無
  - 技術
    - Python で書く
    - CNN でもそこそこいけるらしい
    - `FP/(FP+TN)=(XSSと予測)/(実際にはXSSではない)`が低い方がいい
    - XSS 検知 API はさまざまなコンポーネントに対して一つでも Positive が出たら XSS と判定するが，多くのユーザーの入力は XSS にならない上，そのクエリでうまくページが生成されなかったら不便であるため
- 脆弱なサイト(時間があれば, 優先度高)
  - 技術
    - PHP で書く
    - クエリから受け取ったものをエスケープせずにそのまま出力する
- XSS 検知 API テストツール(時間があれば, 優先度低)
  - 入力は`/[アルファベット+日本語]{1,10}/`の乱数

### 難しそうなところ

- jQuery などによって生成した**ある時点で静的な(?)**HTML ファイルを入力としてうけとりたいが，僕の技術的にできるのか？？？

  - selenium とかでできそうだけど，出来なくても授業ない成果物としては耐え
  - chrome 拡張を使う

- XSS データセットを使用したモデルへの入力ができるか

  - 正規化が難しそう

- そもそも利用者はどうやって API を叩くのか
  - 利用例
    - サイト 1: クエリを受け取って API1 に投げて受け取った HTML を描画するだけ
    - API 1: サイト 1 からクエリを受け取り，HTML を生成して返す．HTML 生成時に XSS 検知 API を通す
  - とかならできるけどこの場合サイト運営者が独自に API 1 を作成する必要がある
  - chrome 拡張をから叩く
